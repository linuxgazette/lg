<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Two-cent tip: Download whole directory as zip file</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Two-cent tip: Download whole directory as zip file</h3>
<p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Fri, 12 Sep 2008 15:05:13 +0100</b>
</p>

<p>
A quick "download whole directory as zip file" CGI
</p>

<p>
If you have a large collection of files, and you put them on your
webserver without any special index, then it's likely that the
server will generate its own index HTML for you.  This is all very
well, but I recently had the tedious experience of downloading 46
separate small files from my webserver, using somebody's Windows
box with Internet Explorer and a "download manager" that took me
through 3 dialog boxes per click in a foreign language.  Wouldn't
it be nice if I could tell the web server to zip them all up and
send me the zip file.
</p>

<p>
You can do this because the Unix "zip" utility (package "zip" on
most distributions) is capable of writing to standard output.  At a
minimum, you can create a CGI script like this:
</p>

<pre>
#!/bin/bash
echo Content-Type: application/zip
echo "Content-Disposition: attachment; filename=files.zip"
echo
zip -9r - *
</pre>

<p>
This zips the content of the current directory, sending the result
to standard output (that's what the dash - is for) and telling the
Web browser that it's a zip file called files.zip.
</p>

<p>
But we can go one up on that - the following short script will list
the contents of the directory, with an optional "download as zip"
link that sets the filename appropriately.  If you're using the
small Mathopd webserver, you can edit /etc/mathopd.conf and set
AutoIndexCommand to the path of this script:
</p>

<p>
<pre class='code'>
export Filename="$(pwd|sed -e 's,.*/,,').zip"
if test "$QUERY_STRING" == zip; then
  echo Content-type: application/zip
  echo "Content-Disposition: attachment; filename=$Filename"
  echo
  zip -9r - *
else
  echo "Content-type: text/html; charset=utf-8"
  echo
  echo "&lt;HTML&gt;&lt;BODY&gt;&lt;A HREF=\"..\"&gt;Parent directory&lt;/A&gt; |"
  echo "&lt;A HREF=\"./?zip\"&gt;Download $Filename&lt;/A&gt;"
  echo "&lt;h2&gt;Contents of $Filename&lt;/h2&gt;&lt;UL&gt;"
  for N in *; do
    echo "&lt;LI&gt;&lt;A HREF=\"$N\"&gt;$N&lt;/A&gt; ($(du -h "$N"|cut -f1))&lt;/LI&gt;"
  done
  echo "&lt;/UL&gt;&lt;/BODY&gt;&lt;/HTML&gt;"
fi
</pre>

<p>
This assumes that any non-ASCII filenames will be listed in UTF-8
(otherwise change the charset).
</p>


<pre>-- 
Silas S Brown <a href="http://people.pwf.cam.ac.uk/ssb22">http://people.pwf.cam.ac.uk/ssb22</a>
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Fri, 12 Sep 2008 15:26:20 +0100</b>
</p>

<p>
Further to my previous email, if you want the resulting zip file to
unpack into a subdirectory (rather than having everything at top
level), then instead of
</p>

<pre>
zip -9r - *
</pre>

<p>
you can have
</p>

<pre>
cd .. ; zip -9r - "$(echo "$Filename"|sed -e s/.zip$//)"
</pre>

<p>
where Filename has been set earlier (i.e. in the longer version of
the script).
</p>

<p>
Silas
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Martin J Hooper [martinjh at blueyonder.co.uk]

</p>
</b><br />
<b>Fri, 12 Sep 2008 15:49:51 +0100</b>
</p>

<p>
Silas S. Brown wrote:
</p>

<pre>
&gt; But we can go one up on that - the following short script will
&gt; list the contents of the directory, with an optional "download
&gt; as zip" link that sets the filename appropriately.  If you're
&gt; using the small Mathopd webserver, you can edit
&gt; /etc/mathopd.conf and set AutoIndexCommand to the path of this
&gt; script:
</pre>


<p>
Can you do this on Apache2?  I'm presuming that you can
somehow...  Not really an expert on configuring web servers!
</p>

<p>
Plus getting my server to run CGI scripts too.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Fri, 12 Sep 2008 11:24:09 -0400</b>
</p>

<p>
On Fri, Sep 12, 2008 at 03:49:51PM +0100, Martin J Hooper wrote:
</p>

<pre>
&gt; Silas S. Brown wrote:
&gt; &gt; But we can go one up on that - the following short script will
&gt; &gt; list the contents of the directory, with an optional "download
&gt; &gt; as zip" link that sets the filename appropriately.  If you're
&gt; &gt; using the small Mathopd webserver, you can edit
&gt; &gt; /etc/mathopd.conf and set AutoIndexCommand to the path of this
&gt; &gt; script:
&gt; 
&gt; Can you do this on Apache2?  I'm presuming that you can
&gt; somehow...  Not really an expert on configuring web servers!
</pre>

<p>
Of course. It's not really server dependent - any server that can
interpret CGI and has Bash installed should be able to handle it.
 
</p>

<pre>
&gt; Plus getting my server to run CGI scripts too.
</pre>

<p>
You need to read up on the "Options" directive and the 'ExecCGI'
setting.
</p>

<p>
<a href="http://httpd.apache.org/docs/2.0/mod/core.html#options">http://httpd.apache.org/docs/2.0/mod/core.html#options</a>
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Fri, 12 Sep 2008 10:52:16 -0400</b>
</p>

<p>
On Fri, Sep 12, 2008 at 03:05:13PM +0100, Silas S. Brown wrote:
</p>

<pre>
&gt; A quick "download whole directory as zip file" CGI
</pre>

<p>
[snip]
 
</p>

<pre>
&gt; export Filename="$(pwd|sed -e 's,.*/,,').zip"
&gt; if test "$QUERY_STRING" == zip; then
&gt;   echo Content-type: application/zip
&gt;   echo "Content-Disposition: attachment; filename=$Filename"
&gt;   echo
&gt;   zip -9r - *
&gt; else
&gt;   echo "Content-type: text/html; charset=utf-8"
&gt;   echo
&gt;   echo "&lt;HTML&gt;&lt;BODY&gt;&lt;A HREF=\"..\"&gt;Parent directory&lt;/A&gt; |"
&gt;   echo "&lt;A HREF=\"./?zip\"&gt;Download $Filename&lt;/A&gt;"
</pre>

<p>
I'm afraid that's not going to work: the above link will produce a URL
that follows the current <em>directory</em> name with the query string, whereas
what you need is the current <em>scriptname</em> followed by "?zip". So, slight
modification:
</p>

<pre>
echo "&lt;A HREF=\"./${0##*/}?zip\"&gt;Download $Filename&lt;/A&gt;"
</pre>

<p>
Other than that - great tip, Silas! In the past, I've just downloaded
the index page and used the "-i" switch of "wget" to read/retrieve all
the links (when on someone else's server), or just made up a tarball
when it's on my own - but this makes for a nice option.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Fri, 12 Sep 2008 13:01:04 -0400</b>
</p>

<p>
On Fri, Sep 12, 2008 at 05:33:05PM +0100, Silas S. Brown wrote:
</p>

<pre>
&gt; Hi Ben,
&gt; 
&gt; On Fri, Sep 12, 2008 at 10:52:16AM -0400, Ben Okopnik wrote:
&gt; &gt; &gt;   echo "&lt;A HREF=\"./?zip\"&gt;Download $Filename&lt;/A&gt;"
&gt; &gt; I'm afraid that's not going to work: the above link will produce a URL
&gt; &gt; that follows the current <em>directory</em> name with the query string, whereas
&gt; &gt; what you need is the current <em>scriptname</em> followed by "?zip".
&gt; 
&gt; That's correct if you're running it as a normal CGI script, but not
&gt; if you're running it as a Mathopd AutoIndexCommand as I suggested.
&gt; With AutoIndexCommand, the script is run for ANY directory that
&gt; doesn't have an index.html, so you don't have to copy the script
&gt; into every subdirectory.  In this case, you DON'T want to point the
&gt; URL to the script itself, because the script itself is probably in
&gt; a different directory from the one being listed.  You want to point
&gt; the URL back to the directory, so that, next time the script is
&gt; called by AutoIndexCommand, it's in the right directory to make the
&gt; zip file.  Otherwise, it would be in the script directory instead,
&gt; which may be different.
&gt; 
&gt; I have tested this, honest <img src="../gx/smile.png" alt=":)">
</pre>
 
Oh, I believe you. <img src="../gx/smile.png" alt=":)"> I've never used Mathopd, myself, but there are
directives you can use in, say, Apache that would do something like
that, too. On the other hand, making the script server-independent has
its attractions too.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sun, 14 Sep 2008 20:47:39 -0400</b>
</p>

<p>
[ Silas, do me a favor and CC TAG on any replies; that way, this
exchange can be published along with the tip. Thanks! ]
</p>

<p>
On Sat, Sep 13, 2008 at 10:10:45AM +0100, Silas S. Brown wrote:
</p>

<pre>
&gt; Hi Ben,
&gt; 
&gt; On Fri, Sep 12, 2008 at 01:01:04PM -0400, Ben Okopnik wrote:
&gt; &gt; On the other hand, making the script server-independent has
&gt; &gt; its attractions too.
&gt; 
&gt; Yes, but if the URL points to the script not
&gt; the directory, you'd then have to put the
&gt; script in every directory and subdirectory that
&gt; you want to be browsable in this way.  
</pre>

<p>
Well, you could simply create a symlink to the script in every directory
where you wanted it. After all, how many directories do most of us want
to make available that way? A couple at most.
</p>


<pre>
&gt; Unless
&gt; we add a parameter specifying the directory to
&gt; be zipped, in which case we need to implement
&gt; security mechanisms to stop people using it to
&gt; access directories they shouldn't, and then it
&gt; would no longer be short enough to be a
&gt; two-cent tip <img src="../gx/smile.png" alt=":-)">
</pre>

<p>
How would that be different from your suggestion for Mathopd? In fact,
it seems that the Mathopd solution would be less controllable: if you
wanted to stop someone from zipping up some subdirectory, it seems to me
that you'd have a difficult time of it - you'd have to make that
specific directory non-browseable by, e.g., creating an empty
'index.html' in it.
</p>


<pre>
&gt; Maybe we should just say that it needs a Web
&gt; server that can run an arbitrary script to make
&gt; the default index of a directory. I know Mathopd
&gt; is such a server (AutoIndexCommand) and I expect
&gt; there are others, but I don't have a complete
&gt; list of which servers can and can't.
</pre>

<p>
This is why I said that making it server-dependent is not the best idea.
It's sort of like writing a script that will only run on unpredictably
arbitrary versions of Unix.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Mon, 15 Sep 2008 09:49:39 +0100</b>
</p>

<p>
Hi Ben,
</p>

<p>
On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
</p>

<pre>
&gt; Well, you could simply create a symlink to the script in every directory
&gt; where you wanted it. After all, how many directories do most of us want
&gt; to make available that way? A couple at most.
</pre>

<p>
Well I'm exporting my collection of audio recordings for my
language-learning software Gradint.  (Some of the recordings are
copyright, so it's only for personal acces and the URL is not public.)
The collection is in a hierarchy with a total of 328 directories.
</p>

<p>
I could make 328 symlinks using
</p>

<pre>
for N in $(find . -type d); do ln -s /path/to/target $N/index.cgi; done
</pre>

<p>
but I'd have to re-do that whenever any new directory is created
(manually or via cron).  (And also, having symlinks means  I wouldn't be
able to put that directory on a filesystem that doesn't support
symlinks, such as the VFAT filesystem on the extra USB disk of my slug;
I'd have to make sure there's an e2fs image so that the symlinks work.
But that's a small issue.)
</p>

<p>
I'd rather the mathopd option as it saves a lot of symlink maintenance.
And yes mathopd does give you control over which directories it allows
this for: the AutoIndexCommand can be set for "all subdirectories of a
given directory" and nothing else.
</p>

<p>
Lots of people run Mathopd (it's a nice light-weight server, especially
good for resource-limited situations), so I think it's worth noting the
Mathopd option.  The server-independent option might be useful for
others, but it does need more work (linking the CGI to all
subdirectories).  So perhaps both should be included.  But make sure
that, if you're using the Mathopd option, the script does <strong>not</strong> refer to
itself (only to the directory).
</p>

<p>
Incidentally, in Apache if you set
</p>

<pre>
DirectoryIndex index.html index.cgi
</pre>

<p>
then index.cgi will be run by default if index.html is not present, and
that means the script should be able to run unchanged (it does not need
to refer to itself, it can just refer to the directory), but you still
need to link it to every directory.
</p>

<p>
If you do put the CGI in all directories, it might be a good idea to add
</p>

<pre>
-x index.cgi
</pre>

<p>
to the zip command line, to avoid cluttering the zip file with multiple
copies of index.cgi.
</p>


<pre>
&gt; &gt; we add a parameter specifying the directory to
&gt; &gt; be zipped, ..
&gt; How would that be different from your suggestion for Mathopd?
</pre>

<p>
It would be more complex and take longer to implement <img src="../gx/smile.png" alt=":)"> especially the
security etc.
</p>

<p>
I wonder if anyone out there knows of a featureful and robust script
that's already been written?
</p>

<p>
Meanwhile, I just wanted to write a short one and show it can be done.
</p>

<p>
Silas
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 15 Sep 2008 09:27:24 -0400</b>
</p>

<p>
On Mon, Sep 15, 2008 at 09:49:39AM +0100, Silas S. Brown wrote:
</p>

<pre>
&gt; Hi Ben,
&gt; 
&gt; On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
&gt; &gt; Well, you could simply create a symlink to the script in every directory
&gt; &gt; where you wanted it. After all, how many directories do most of us want
&gt; &gt; to make available that way? A couple at most.
&gt; 
&gt; Well I'm exporting my collection of audio recordings
&gt; for my language-learning software Gradint. 
&gt; (Some of the recordings are copyright, so it's only
&gt; for personal acces and the URL is not public.)
&gt; The collection is in a hierarchy with a total
&gt; of 328 directories.
</pre>

<p>
Obviously, in your case, it's different - radically so - and it makes
sense to do it that way.
</p>

<p>
By the way, Silas, I hope you're not taking this wrong: I'm trying to
provide useful critique rather than criticism here. Your idea is indeed
a very useful one.
 
</p>

<pre>
&gt; I could make 328 symlinks using
&gt; 
&gt; for N in $(find . -type d); do ln -s /path/to/target $N/index.cgi; done
</pre>

<p>
Or just
</p>

<pre>
find . -type d -exec ln -s /path/to/target {}/index.cgi \;
</pre>


<pre>
&gt; but I'd have to re-do that whenever any new
&gt; directory is created (manually or via cron). 
</pre>

<p>
Seems like using 'cron' would be reasonable, but remembering to "undo"
that crontab entry if and when you get rid of that structure could be a
problem.
</p>


<pre>
&gt; (And also, having symlinks means  I wouldn't be
&gt; able to put that directory on a filesystem that
&gt; doesn't support symlinks, such as the VFAT
&gt; filesystem on the extra USB disk of my slug;
&gt; I'd have to make sure there's an e2fs image so
&gt; that the symlinks work.  But that's a small issue.)
</pre>

<p>
Or you could just copy rather than linking - it's a tiny script.
 
</p>

<pre>
&gt; I'd rather the mathopd option as it saves a lot
&gt; of symlink maintenance.  And yes mathopd does
&gt; give you control over which directories it
&gt; allows this for: the AutoIndexCommand can be
&gt; set for "all subdirectories of a given
&gt; directory" and nothing else.
&gt; 
&gt; Lots of people run Mathopd (it's a nice
&gt; light-weight server, especially good for
&gt; resource-limited situations), so I think it's
&gt; worth noting the Mathopd option.  The
&gt; server-independent option might be useful for
&gt; others, but it does need more work (linking the
&gt; CGI to all subdirectories).  So perhaps both
&gt; should be included.  
</pre>

<p>
That makes sense.
</p>

<p>
I just realized: if you have a hierarchy, and you run this script in the
top directory, you'll get every file in the structure, recursively. That
could be a problem - or a feature, depending on what the user wanted. It
might make sense to add a 'Download this directory only' option, with
'zip -9D - *' as the executable part.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Mon, 15 Sep 2008 14:40:54 +0100</b>
</p>

<p>
2008/9/15 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
</p>

<pre>
&gt; Hi Ben,
&gt;
&gt; On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
&gt;&gt; Well, you could simply create a symlink to the script in every directory
&gt;&gt; where you wanted it. After all, how many directories do most of us want
&gt;&gt; to make available that way? A couple at most.
&gt;
&gt; Well I'm exporting my collection of audio recordings
&gt; for my language-learning software Gradint.
</pre>

<p>
Well heck, why not advertise a little? <img src="../gx/smile.png" alt=":)">
</p>

<p>
<a href="http://people.pwf.cam.ac.uk/ssb22/gradint/">http://people.pwf.cam.ac.uk/ssb22/gradint/</a> seems to be the link.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 15 Sep 2008 10:06:09 -0400</b>
</p>

<p>
On Mon, Sep 15, 2008 at 02:40:54PM +0100, Jimmy O'Regan wrote:
</p>

<pre>
&gt; 2008/9/15 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
&gt; &gt; Hi Ben,
&gt; &gt;
&gt; &gt; On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
&gt; &gt;&gt; Well, you could simply create a symlink to the script in every directory
&gt; &gt;&gt; where you wanted it. After all, how many directories do most of us want
&gt; &gt;&gt; to make available that way? A couple at most.
&gt; &gt;
&gt; &gt; Well I'm exporting my collection of audio recordings
&gt; &gt; for my language-learning software Gradint.
&gt; 
&gt; Well heck, why not advertise a little? <img src="../gx/smile.png" alt=":)">
&gt; 
&gt; <a href="http://people.pwf.cam.ac.uk/ssb22/gradint/">http://people.pwf.cam.ac.uk/ssb22/gradint/</a> seems to be the link.
</pre>

<p>
Oh yeah - speaking of which - thanks for your "charlearn" program as
well, Silas!  I've played around with learning the Japanese syllabary,
and found it quite useful for that.
</p>

<p>
<a href="http://people.pwf.cam.ac.uk/ssb22/gradint/charlearn.html">http://people.pwf.cam.ac.uk/ssb22/gradint/charlearn.html</a>
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Tue, 16 Sep 2008 09:44:07 +0100</b>
</p>

<p>
Hi Ben,
</p>


<pre>
&gt; I hope you're not taking this wrong
</pre>

<p>
Not at all <img src="../gx/smile.png" alt=":)">
</p>


<pre>
&gt; I've played around with learning the Japanese syllabary,
&gt; and found it quite useful for that.
</pre>

<p>
„Çà„Çç„Åó„Åè, glad it's useful.
</p>

<p>
You should be able to use Gradint as well if you can find someone to
record the words and phrases for you.  Unfortunately there doesn't seem
to be a free Japanese speech synthesizer yet, although we could put
together a simple one by concatenation, if we can find a set of
good-quality GPL'd recordings of all possible Japanese syllables
(including the ones made from more than one kana), spoken at a
reasonable speaking pace (not drawn out artificially), all of similar
length, and ideally all the same pitch (although Praat can compensate
for that if necessary).  But I don't know where to get that from; all
the Japanese people I know are too nervous to do such a thing.
</p>

<p>
Silas
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Tue, 16 Sep 2008 10:25:19 +0100</b>
</p>

<p>
2008/9/16 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
</p>

<pre>
&gt; Hi Ben,
&gt;
&gt;&gt; I hope you're not taking this wrong
&gt;
&gt; Not at all <img src="../gx/smile.png" alt=":)">
&gt;
&gt;&gt; I've played around with learning the Japanese syllabary,
&gt;&gt; and found it quite useful for that.
&gt;
&gt; „Çà„Çç„Åó„Åè, glad it's useful.
&gt;
&gt; You shuld be able to use Gradint as well if you
&gt; can find someone to record the words and
&gt; phrases for you.  Unfortunately there doesn't
&gt; seem to be a free Japanese speech synthesizer
</pre>

<p>
There is GalateaTalk (<a href="http://sourceforge.jp/projects/galateatalk">http://sourceforge.jp/projects/galateatalk</a>)
which is part of the Galatea project
(<a href="http://hil.t.u-tokyo.ac.jp/~galatea/">http://hil.t.u-tokyo.ac.jp/~galatea/</a>), which also includes a speech
recognition system, and an avatar system. The licence  looks
relatively inoffensive:
</p>

<p>
"Open-source Toolkit for Anthropomorphic Spoken Dialogue Agent" is a result of
the Information Technology Development Projects Specific Development Areas of
Information-technology Promotion Agency (IPA), Japan. ASTEM is the author of
"Open-source Toolkit for Anthropomorphic Spoken Dialogue Agent" and retains
the copyright thereto.  However, as long as you accept and remain in strict
compliance with the terms and conditions of the license set forth herein, you
are hereby granted a royalty-free license to use "Open-source Toolkit for
Anthropomorphic Spoken Dialogue Agent" including the source code thereof and
the documentation thereto (collectively referred to herein as the
"Software"). Use by you of the Software shall constitute acceptance by you of
all terms and conditions of the license set forth herein.
</p>

<p>
Terms and Conditions of License
</p>

<p>
1. So long as you accept and strictly comply with the terms and conditions of
the license set forth herein, ASTEM will not enforce the copyright or moral
rights owned by ASTEM in respect of the Software, in connection with the use,
copying, duplication, adaptation, modification, preparation of a derivative
work, aggregation with another program, or insertion into another program of
the Software or the distribution or transmission of the Software. However, in
the event you or any other user of the Software revises all or any portion of
the Software, and such revision is distributed, then, in addition to the
notice required to be affixed pursuant to paragraph 2 below, a notice shall be
affixed indicating that the Software has been revised, and indicating the date
of such revision and the name of the person or entity that made the revision.
</p>

<p>
2. In the event you provide to any third party all or any portion of the
Software, whether for copying, duplication, adaptation, modification,
preparation of a derivative work, aggregation with another program, insertion
into another program, or other user, you shall affix the following copyright
notice and all terms and conditions of this license (both the English and
Japanese language versions) as set forth herein, without any revision or
change whatsoever.
</p>

<p>
Form of copyright notice:
</p>

<p>
Copyright (C) 2000-2003 Information-technology Promotion Agency, Japan
Copyright (C) 2000-2003 ASTEM RI/Kyoto, Japan
</p>

<p>
3. ASTEM is licensing the Software, which is the trial product of research and
development, on an as is and royalty-free basis, and makes no warranty or
guaranty whatsoever with respect to the Software, whether express or implied,
irrespective of the nation where used, and whether or not arising out of
statute or otherwise, including but not limited to any warranty or guaranty
with respect to quality, performance, merchantability, fitness for a
particular purpose, absence of defects, or absence of infringement of
copyright, patent rights, trademark rights or other intellectual property
rights, trade secrets or proprietary rights of any third party. You and every
other user of the Software hereby acknowledge that the Software is licensed
without any warranty or guaranty, and assume all risks arising out of the
absence of any warranty or guaranty. In the event the terms and conditions of
this license are inconsistent with the obligations imposed upon you by
judgment of a court or for any other reason, you may not use the Software.
ASTEM shall not have any liability to you or to any third party for damages or
liabilities of any nature whatsoever arising out of your use of or inability
to use the Software, whether of an ordinary, special, direct, indirect,
consequential or incidental nature (including without limitation lost profits)
or otherwise, and whether arising out of contract, negligence, tortuous
conduct, product liability or any other legal theory or reason whatsoever of
any nation or jurisdiction.
</p>

<p>
4. When you use the Software for purposes associated with any system for
nuclear power related matters, air traffic control or other traffic control,
medical, emergency or security related uses, or any other system which may
pose a significant risk of loss of life, bodily injury or damage to property,
you shall take responsibility, and the developer or supplier of the Software
cannot be asked for responsibility at all.
</p>

<p>
5. ASTEM will not conduct any support or maintenance of the Software.
</p>

<p>
6. This license of use of the Software shall be governed by the laws of Japan,
and the Kyoto District Court shall have exclusive primary jurisdiction with
respect to all disputes arising with respect thereto.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Sat, 27 Sep 2008 08:54:47 +0100</b>
</p>

<p>
Hi, further to my previous emails, I've
realised that
</p>

<pre>
du -h
</pre>

<p>
would be better done as
</p>

<pre>
du -h --apparent-size -s
</pre>

<p>
(it's always worth checking to see if there are
better parameters to the command).  It may also
be useful to put a
</p>

<pre>
"($(du -h --apparent-size -s|cut -f1))"
</pre>

<p>
after the "Download $Filename" link.
</p>

<p>
Silas
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Silas S. Brown [ssb22 at cam.ac.uk]

</p>
</b><br />
<b>Sat, 27 Sep 2008 12:19:06 +0100</b>
</p>

<p>
On Sat, Sep 27, 2008 at 08:54:47AM +0100, Silas S. Brown wrote:
</p>

<pre>
&gt; "($(du -h --apparent-size -s|cut -f1))"
&gt; 
&gt; after the "Download $Filename" link.
</pre>

<p>
Note that this does of course give the UNcompressed size (not that it
makes much difference if the files don't compress well anyway).
</p>

<p>
Silas
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Deividson Okopnik [deivid.okop at gmail.com]

</p>
</b><br />
<b>Mon, 15 Sep 2008 13:52:40 -0300</b>
</p>

<p>
On Mon, Sep 15, 2008 at 10:40 AM, Jimmy O'Regan &lt;joregan@gmail.com&gt; wrote:
</p>

<pre>
&gt; 2008/9/15 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
&gt;&gt; Hi Ben,
&gt;&gt;
&gt;&gt; On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
&gt;&gt;
&gt;&gt; Well I'm exporting my collection of audio recordings
&gt;&gt; for my language-learning software Gradint.
&gt;
&gt; Well heck, why not advertise a little? <img src="../gx/smile.png" alt=":)">
&gt;
&gt; <a href="http://people.pwf.cam.ac.uk/ssb22/gradint/">http://people.pwf.cam.ac.uk/ssb22/gradint/</a> seems to be the link.
&gt;
</pre>

<p>
Looks like a great software - I guess i should start learning my 3rd language <img src="../gx/smile.png" alt=":)">
</p>

<p>
Is there any place to look for pre-made courses? Trying to decide
between spanish and italian here.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 15 Sep 2008 14:37:54 -0400</b>
</p>

<p>
On Mon, Sep 15, 2008 at 01:52:40PM -0300, Deividson Okopnik wrote:
</p>

<pre>
&gt; On Mon, Sep 15, 2008 at 10:40 AM, Jimmy O'Regan &lt;joregan@gmail.com&gt; wrote:
&gt; &gt; 2008/9/15 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
&gt; &gt;&gt; Hi Ben,
&gt; &gt;&gt;
&gt; &gt;&gt; On Sun, Sep 14, 2008 at 08:47:39PM -0400, Ben Okopnik wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Well I'm exporting my collection of audio recordings
&gt; &gt;&gt; for my language-learning software Gradint.
&gt; &gt;
&gt; &gt; Well heck, why not advertise a little? <img src="../gx/smile.png" alt=":)">
&gt; &gt;
&gt; &gt; <a href="http://people.pwf.cam.ac.uk/ssb22/gradint/">http://people.pwf.cam.ac.uk/ssb22/gradint/</a> seems to be the link.
&gt; &gt;
&gt; 
&gt; Looks like a great software - I guess i should start learning my 3rd language <img src="../gx/smile.png" alt=":)">
&gt; 
&gt; Is there any place to look for pre-made courses? Trying to decide
&gt; between spanish and italian here.
</pre>

<p>
It just so happens that I've been testing something you might find
useful.
</p>

<p>
A couple of weeks ago, I downloaded and tried out 'latrine' (great name,
eh? It's supposed to be a LAnguage TRaINEr...) - which turned out to
have a major bug in it (I've already reported it.) 'latrine' uses the
dictionary files in /usr/share/dictd/ - but since the lookup terms
contain not just the words but also the IPA pronunciation keys,
'latrine' requires you to enter not only the word but also the
pronunciation key - otherwise, your answer is marked "wrong". Whoops...
</p>

<p>
Since it's only a text-parsing app, it didn't take me long to hack up a
Perl program that did what 'latrine' should have been doing. Kat has
been using it since then to practice her Russian, and I have to say that
her comprehension has been improving by huge leaps.
</p>

<p>
Example session (one in Spanish, one in Russian):
</p>

<p>
<pre class='code'>
ben@Tyr:/tmp$ ./ltrain freedict-eng-spa.dict
<strong>*</strong> Type '!exit' to quit <strong>*</strong>
 
Word: bomba
Translation: pump
Congratulations, you got it! (1 right, 0 wrong so far)
[bomb|pump] : [bomba]
 
Word: hiedra
Translation: 
Nope, you missed it. (1 right, 1 wrong so far)
[ivy] : [hiedra|yedra]
 
Word: azul
Translation: blue
Congratulations, you got it! (2 right, 1 wrong so far)
[blue|sky blue] : [azul]
 
Word: m√°s
Translation: more
Congratulations, you got it! (3 right, 1 wrong so far)
[more] : [m√°s]
 
Word: costear
Translation: cost
Nope, you missed it. (3 right, 2 wrong so far)
[bear the cost of|defray the cost of|pay the expenses of] : [costear]
 
Word: entre
Translation: between
Congratulations, you got it! (4 right, 2 wrong so far)
[among|between] : [entre]
 
Word: plano
Translation: !exit
Your score is: 4 right, 2 wrong.
</pre>

<p>
<pre class='code'>
ben@Tyr:/tmp$ ./ltrain freedict-eng-ru.dict
<strong>*</strong> Type '!exit' to quit <strong>*</strong>
 
Word: –∞—Ä—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π
Translation: artistic
Congratulations, you got it! (1 right, 0 wrong so far)
[artistic] : [–∞—Ä—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π]
 
Word: –∞–≥—Ä–µ—Å—Å–æ—Ä
Translation: aggressor
Congratulations, you got it! (2 right, 0 wrong so far)
[aggressor|assailant|attacker] : [–∞–≥—Ä–µ—Å—Å–æ—Ä]
 
Word: –ò—Ä–∞–Ω
Translation: Iran
Congratulations, you got it! (3 right, 0 wrong so far)
[Iran|Persia] : [–ò—Ä–∞–Ω]
 
Word: –æ–¥–µ–≤–∞—Ç—å
Translation: dress
Congratulations, you got it! (4 right, 0 wrong so far)
[clothe|dress] : [–æ–¥–µ–≤–∞—Ç—å|–æ–¥–µ—Ç—å]
 
Word: –±–∞–∑–∞—Ä
Translation: bazaar
Congratulations, you got it! (5 right, 0 wrong so far)
[bazaar|fair|market|marketplace] : [–±–∞–∑–∞—Ä]
 
Word: —Ü–µ–ª—å
Translation: target
Congratulations, you got it! (6 right, 0 wrong so far)
[aim|goal|purpose|target] : [—Ü–µ–ª—å]
 
Word: –±—É—Ö–≥–∞–ª—Ç–µ—Ä
Translation: !exit
Your score is: 6 right, 0 wrong.
</pre>

<p>
I make a point of keeping separate lexicon files for this rather than
using the ones from "/usr/share/dictd" since I find that they require a
significant number of corrections. Eventually, after I've polished them
up, I'll send them to the 'dictd' folks.
</p>

<p>
Meanwhile, 'ltrain' (which is self-documenting; just run it without any
arguments to see the manpage) is available at
'<a href="http://okopnik.com/misc/ltrain">http://okopnik.com/misc/ltrain</a>'. Comments and suggestions are always
welcome.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Tue, 16 Sep 2008 10:47:24 +0100</b>
</p>

<p>
2008/9/15 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; I make a point of keeping separate lexicon files for this rather than
&gt; using the ones from "/usr/share/dictd" since I find that they require a
&gt; significant number of corrections. Eventually, after I've polished them
&gt; up, I'll send them to the 'dictd' folks.
</pre>

<p>
Those files originate with the freedict project, which sadly seems to
be defunct. I sent some fixes to their Irish-English dictionary around
a year ago and subscribed to the mailing list - the fixes have gone
untouched, the list has seen little other than spam. In any case, the
dict files are generated from TEI-encoded XML files (which is also
used internally at Distributed Proofreaders for new Project Gutenberg
etexts), which would be the best place to make the changes (I'm sure
the Debian maintainer would be happy to integrate your fixes).
</p>

<p>
Most of the data in Freedict came from a Windows program called Ergane
(<a href="http://download.travlang.com/Ergane//">http://download.travlang.com/Ergane//</a>) which allowed it's
dictionaries to be used under public domain terms (though I'm not sure
if that was true of later versions). The program used Esperanto as a
pivot language, which is probably the reason why there are a few
questionable entries in the dictionaries (IIRC, the Russian-English
dictionary had '–∞–≥–µ–Ω—Ç' matched to 'g-man' rather than 'agent' - this
is one reason why we have direction restrictions in Apertium).
</p>

<p>
If you want extra words, wikipedia is a nice place to look. This is a
version of Francis Tyers' wikipedia script[1] to output to dict format
(original here: <a href="http://wiki.apertium.org/wiki/Building_dictionaries):">http://wiki.apertium.org/wiki/Building_dictionaries):</a>
</p>

<pre>
#!/bin/sh
 
#language to translate from
LANGF=$2
#language to translate to
LANGT=$3
#filename of wordlist
LIST=$1
 
for LWORD in `cat $LIST`; do
        TEXT=`wget -q <a href="http://$LANGF.wikipedia.org/wiki/$LWORD">http://$LANGF.wikipedia.org/wiki/$LWORD</a> -O - |
grep 'interwiki-'$LANGT`;
        if [ $? -eq '0' ]; then
                RWORD=`echo $TEXT |
                cut -f4 -d'"' | cut -f5 -d'/' |
                python -c 'import urllib, sys; print
urllib.unquote(sys.stdin.read());' |
                sed 's/(\w*)//g'`;
                #echo '&lt;e&gt;&lt;p&gt;&lt;l&gt;'$LWORD'&lt;s n="n"/&gt;&lt;/l&gt;&lt;r&gt;'$RWORD'&lt;s
n="n"/&gt;&lt;/r&gt;&lt;/p&gt;&lt;/e&gt;';
		echo $LWORD;
		echo "     "$RWORD;
		echo;
        fi;
        sleep 8; # don't put undue strain on the Wikimedia servers
done
</pre>

<pre>
$ cat in-txt
cat
house
city
 
$ ./wikipedia.sh in-txt en pt
cat
     Gato_dom√©stico
 
house
     Casa
 
city
     Cidade
</pre>


<p>
[1] Yes, we can do that: interwiki links are not expressive, so not
covered by copyright.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Tue, 16 Sep 2008 18:36:20 -0400</b>
</p>

<p>
On Tue, Sep 16, 2008 at 10:47:24AM +0100, Jimmy O'Regan wrote:
</p>

<pre>
&gt; 2008/9/15 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
&gt; &gt; I make a point of keeping separate lexicon files for this rather than
&gt; &gt; using the ones from "/usr/share/dictd" since I find that they require a
&gt; &gt; significant number of corrections. Eventually, after I've polished them
&gt; &gt; up, I'll send them to the 'dictd' folks.
&gt; 
&gt; Those files originate with the freedict project, which sadly seems to
&gt; be defunct. 
</pre>

<p>
<img src="../gx/frown.png" alt=":(">(((((((((((((((((((((((((((((
</p>

<p>
...and a few more '(((('s for good measure. That <strong>REALLY</strong> sucks!
</p>


<pre>
&gt; I sent some fixes to their Irish-English dictionary around
&gt; a year ago and subscribed to the mailing list - the fixes have gone
&gt; untouched, the list has seen little other than spam. In any case, the
&gt; dict files are generated from TEI-encoded XML files (which is also
&gt; used internally at Distributed Proofreaders for new Project Gutenberg
&gt; etexts), which would be the best place to make the changes (I'm sure
&gt; the Debian maintainer would be happy to integrate your fixes).
</pre>

<p>
I'll look into that in a while.
 
</p>

<pre>
&gt; Most of the data in Freedict came from a Windows program called Ergane
&gt; (<a href="http://download.travlang.com/Ergane//">http://download.travlang.com/Ergane//</a>) which allowed it's
&gt; dictionaries to be used under public domain terms (though I'm not sure
&gt; if that was true of later versions). The program used Esperanto as a
&gt; pivot language, which is probably the reason why there are a few
&gt; questionable entries in the dictionaries (IIRC, the Russian-English
&gt; dictionary had '–∞–≥–µ–Ω—Ç' matched to 'g-man' rather than 'agent' - this
&gt; is one reason why we have direction restrictions in Apertium).
</pre>

<p>
Oh, it's not just a question of direction; there were plenty of simple
errors as well. Truncated words, misspellings, and - for some odd reason
- words in which a part of the correct word would be repeated, something
like "correctorrect" or "wordrdord". There were a number of these. There
were also a number of quite silly literal translations, like "White
Russia" for "Belorussia" (that's like translating "childbearing" as "kid
demeanor".)
 
</p>

<pre>
&gt; If you want extra words, wikipedia is a nice place to look. This is a
&gt; version of Francis Tyers' wikipedia script[1] to output to dict format
&gt; (original here: <a href="http://wiki.apertium.org/wiki/Building_dictionaries):">http://wiki.apertium.org/wiki/Building_dictionaries):</a>
</pre>

<p>
[snip]
 
</p>

<pre>
&gt;         sleep 8; # don't put undue strain on the Wikimedia servers
</pre>

<p>
[laugh] Given that I have pretty close to 100k entries in my
'/usr/share/dict/words' (I use the standard Scrabble word list), and
each translation will take 8 seconds + translation time + network
latency (call it 10 seconds total), that would take more than 11 days to
download. I wonder if there's an easier way?
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Wed, 17 Sep 2008 01:13:11 +0100</b>
</p>

<p>
2008/9/16 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; On Tue, Sep 16, 2008 at 10:47:24AM +0100, Jimmy O'Regan wrote:
&gt;&gt; 2008/9/15 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
&gt;&gt; &gt; I make a point of keeping separate lexicon files for this rather than
&gt;&gt; &gt; using the ones from "/usr/share/dictd" since I find that they require a
&gt;&gt; &gt; significant number of corrections. Eventually, after I've polished them
&gt;&gt; &gt; up, I'll send them to the 'dictd' folks.
&gt;&gt;
&gt;&gt; Those files originate with the freedict project, which sadly seems to
&gt;&gt; be defunct.
&gt;
&gt; <img src="../gx/frown.png" alt=":(">(((((((((((((((((((((((((((((
&gt;
&gt; ...and a few more '(((('s for good measure. That <strong>REALLY</strong> sucks!
&gt;
</pre>

<p>
Well, yeah. But... given what my hobbies are, I've quite a collection
of links to dictionaries under free licences, if anyone's interested
(as well as collections for which we've politely asked, and were
granted rights to distribute under the GPL, but haven't yet had time
to convert - Apertium is the Eclipse of open source MT <img src="../gx/smile.png" alt=":)">
</p>


<pre>
&gt;&gt; I sent some fixes to their Irish-English dictionary around
&gt;&gt; a year ago and subscribed to the mailing list - the fixes have gone
&gt;&gt; untouched, the list has seen little other than spam. In any case, the
&gt;&gt; dict files are generated from TEI-encoded XML files (which is also
&gt;&gt; used internally at Distributed Proofreaders for new Project Gutenberg
&gt;&gt; etexts), which would be the best place to make the changes (I'm sure
&gt;&gt; the Debian maintainer would be happy to integrate your fixes).
&gt;
&gt; I'll look into that in a while.
&gt;
&gt;&gt; Most of the data in Freedict came from a Windows program called Ergane
&gt;&gt; (<a href="http://download.travlang.com/Ergane//">http://download.travlang.com/Ergane//</a>) which allowed it's
&gt;&gt; dictionaries to be used under public domain terms (though I'm not sure
&gt;&gt; if that was true of later versions). The program used Esperanto as a
&gt;&gt; pivot language, which is probably the reason why there are a few
&gt;&gt; questionable entries in the dictionaries (IIRC, the Russian-English
&gt;&gt; dictionary had '¡«≈Œ‘' matched to 'g-man' rather than 'agent' - this
&gt;&gt; is one reason why we have direction restrictions in Apertium).
&gt;
&gt; Oh, it's not just a question of direction; there were plenty of simple
&gt; errors as well. Truncated words, misspellings, and - for some odd reason
&gt; - words in which a part of the correct word would be repeated, something
&gt; like "correctorrect" or "wordrdord". There were a number of these. There
&gt; were also a number of quite silly literal translations, like "White
&gt; Russia" for "Belorussia" (that's like translating "childbearing" as "kid
&gt; demeanor".)
&gt;
</pre>

<p>
Yes; but the 'White Russia' entry exemplifies what I'm talking about -
Ergane was built from an Esperantist's point of view, but applied
across other languages, without considering whether or not a
translation should have restriction or not - translating from 'White
Russia' to the native equivalent of Belorussia is the right thing to
do; the opposite is not.
</p>

<p>
(My preferred method is to, where possible, find a similarly archaic
term which needs no restrictions, but it's not always possible, and
there are probably better uses of the time).
</p>

<p>
I have seen various of the other kinds of errors though; the Irish
examples I fixed were, for the most part, character encoding screw
ups, even after which, there were issues of missing spaces, etc.
</p>


<pre>
&gt;&gt; If you want extra words, wikipedia is a nice place to look. This is a
&gt;&gt; version of Francis Tyers' wikipedia script[1] to output to dict format
&gt;&gt; (original here: <a href="http://wiki.apertium.org/wiki/Building_dictionaries):">http://wiki.apertium.org/wiki/Building_dictionaries):</a>
&gt;
&gt; [snip]
&gt;
&gt;&gt;         sleep 8; # don't put undue strain on the Wikimedia servers
&gt;
&gt; [laugh] Given that I have pretty close to 100k entries in my
&gt; '/usr/share/dict/words' (I use the standard Scrabble word list), and
&gt; each translation will take 8 seconds + translation time + network
&gt; latency (call it 10 seconds total), that would take more than 11 days to
&gt; download. I wonder if there's an easier way?
&gt;
</pre>

<p>
Actually, there are plenty of them. I constructed a ~8k
Portuguese-English dictionary for my parents[1] using mostly
'dictionary crossing' (though I had to do a bit of manual searching,
to ensure my father had the terms he needed for his dialysis - so he
can avoid taking the kinds of drugs that'd kill him, etc. I have ~10k
French-English from the same method (for my sister's birthday[2] today
<img src="../gx/smile.png" alt=":)">
</p>

<p>
There are no end of open source tools available to assist in
dictionary construction - but at the end of the day, they all still
need a knowledgeable human to check them, which is very much the
bottleneck in our process.
</p>


<p>
[1] They went to Portugal to celebrate their 30th anniversary[3]. They
had a bit of a false start when the announcement came that the airline
their flight was booked with announced that they had gone broke the
day before their flight, but the travel agent came through.
</p>

<p>
[2] She's honest enough to only use it as a study aid, rather than as a crutch.
</p>

<p>
[3] Yes, my sister was born the day after my parent's anniversary. No,
my mother still hasn't fully forgiven her - all the more so, because
that particular year was the first that my father had a job after
several years of unemployment, and could afford to take my mother to a
restaurant.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Wed, 17 Sep 2008 01:24:43 +0100</b>
</p>

<p>
2008/9/17 Jimmy O'Regan &lt;joregan@gmail.com&gt;:
</p>

<pre>
&gt; [2] She's honest enough to only use it as a study aid, rather than as a crutch.
&gt;
&gt; [3] Yes, my sister was born the day after my parent's anniversary. No,
&gt; my mother still hasn't fully forgiven her - all the more so, because
</pre>

<p>
Oh; said sister - Catherine - has already won her 'Apertium hero'
award by translating more than 500 words (in Irish and Scots Gaelic,
simultaneously) to English, in less than 3 hours. (She described it as
the best crossword she ever did <img src="../gx/smile.png" alt=":)"> And with fewer mistakes than
automated methods, too (she got a bit confused by the same word in
different parts of speech; something that catches even the most expert
of our contributors).
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__download_whole_directory_as_zip_file">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>